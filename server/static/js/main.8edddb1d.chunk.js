(this["webpackJsonpsocial-ui"]=this["webpackJsonpsocial-ui"]||[]).push([[0],{11:function(e,t,n){},20:function(e,t,n){},39:function(e,t,n){},52:function(e,t,n){},76:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(21),s=n.n(r),i=n(81),o=n(2),l=n(14),u=(n(52),n(29),n(53),n(11),n(4)),d=n.n(u),j=n(7),b="GET_USER_DATA",h="GET_USER_CHAT_NOTIFICATIONS",f="ACCEPT_CHAT_NOTIFICATION",m="DELETE_CHAT_NOTIFICATION",p=n(5),x=n.n(p),O=function(e){return new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace(",","")},g=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={info:null,isAuth:!1},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/user/is_auth/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){t={info:e.data,isAuth:!0}})).catch((function(e){t={info:null,isAuth:!1},e.response.status&&401!=e.response.status&&alert(e.response.status+" error")}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/category/").then((function(e){t=e.data})).catch((function(e){alert(e.response.status+" error")}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/user/find/"+t+"/").then((function(e){n=e.data})).catch((function(e){n=null,404!==e.response.status&&alert(e.response.status+" error")}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={status:null,chatRequestsList:[]},e.prev=1,e.next=4,x.a.get("http://127.0.0.1:8000/api/v1/user/find/".concat(t,"/chat_request/"),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}});case 4:a=e.sent,n.status=a.status,n.chatRequestsList=a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.status=e.t0.response.status;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/chats?sort_by=".concat(t,"&page=").concat(n),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),401!==e.t0.response.status&&alert(e.t0.response.status+" error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/chats/"+t+"/members/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n=e.data})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/chats/"+t+"/request/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n=e.data})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://127.0.0.1:8000/api/v1/chats/".concat(t,"/request/").concat(n,"/"),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a=e.data})).catch((function(e){console.error(e)}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("http://127.0.0.1:8000/api/v1/chats/".concat(t,"/request/").concat(n,"/"),{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a=e.data})).catch((function(e){console.error(e)}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete("http://127.0.0.1:8000/api/v1/chats/".concat(t,"/request/").concat(n,"/"),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a=e.status})).catch((function(e){console.error(e)}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.patch("http://127.0.0.1:8000/api/v1/chats/".concat(t,"/request/"),{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}});case 3:a=e.sent,n=a.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"multipart/form-data"},e.prev=1,e.next=4,x.a.post("http://127.0.0.1:8000/api/v1/chats/",t,{headers:a});case 4:c=e.sent,n=c.data,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",e.t0.response.data);case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){return function(e){g().then((function(t){e({type:b,payload:t})}))}},A=n(3),R=n(0),D=function(e){var t=Object(o.c)((function(e){return e.user}));return Object(R.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow",children:[Object(R.jsx)("h3",{className:"my-0 mr-md-auto font-weight-normal",children:"InTheGame"}),Object(R.jsxs)("nav",{className:"my-2 my-md-0 mr-md-3",children:[Object(R.jsx)("a",{className:"p-2 text-dark",href:"/categories",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439"}),Object(R.jsx)("a",{className:"p-2 text-dark",href:"{% url 'show_all_users' %}",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),Object(R.jsx)("a",{className:"p-2 text-dark",href:"#",children:"\u041e \u043d\u0430\u0441"})]}),Object(R.jsxs)("div",{className:"d-none d-md-block",children:[Object(R.jsx)("a",{className:"btn btn-outline-primary",href:"/auth/login/",style:{marginRight:"5px"},children:"\u0412\u0445\u043e\u0434"}),Object(R.jsx)("a",{className:"btn btn-outline-secondary",href:"/auth/sign_up/",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),Object(R.jsxs)("div",{className:"dropdown d-none d-sm-block d-md-none",style:{marginRight:"auto",marginTop:"-38px"},children:[Object(R.jsx)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(R.jsx)("svg",{style:{width:"21px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",children:Object(R.jsx)("path",{d:"M511.728 64c108.672 0 223.92 91.534 223.92 159.854v159.92c0 61.552-25.6 179.312-94.256 233.376a63.99 63.99 0 0 0-23.968 57.809c2.624 22.16 16.592 41.312 36.848 50.625l278.496 132.064c2.176.992 26.688 5.104 26.688 39.344l.032 62.464L64 959.504V894.56c0-25.44 19.088-33.425 26.72-36.945l281.023-132.624c20.16-9.248 34.065-28.32 36.769-50.32 2.72-22-6.16-43.84-23.456-57.712-66.48-53.376-97.456-170.704-97.456-233.185v-159.92C287.615 157.007 404.016 64 511.728 64zm0-64.002c-141.312 0-288.127 117.938-288.127 223.857v159.92c0 69.872 31.888 211.248 121.392 283.088l-281.04 132.64S.001 827.999.001 863.471v96.032c0 35.344 28.64 63.968 63.951 63.968h895.552c35.344 0 63.968-28.624 63.968-63.968v-96.032c0-37.6-63.968-63.968-63.968-63.968L681.008 667.439c88.656-69.776 118.656-206.849 118.656-283.665v-159.92c0-105.92-146.64-223.855-287.936-223.855z"})})}),Object(R.jsx)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:t.isAuth?Object(R.jsxs)("div",{children:[Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u0427\u0430\u0442\u044b"}),Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u0412\u044b\u0445\u043e\u0434"})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u0412\u0445\u043e\u0434"}),Object(R.jsx)("a",{className:"dropdown-item",href:"#",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})})]})]})},q=function(e){return Object(R.jsx)("div",{className:"col-11 col-sm-11 col-md-10 col-lg-8 col-xl-8 mx-auto border border-primary",children:Object(R.jsx)("a",{href:"/categories/c_id/"+e.id,className:"list-group-item list-group-item-action border-0",children:Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.avatar,className:"rounded-circle mr-1",alt:"user1",width:"65",height:"65",style:{marginLeft:"-10px"}}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",children:[Object(R.jsx)("p",{className:"category-name",children:e.name}),Object(R.jsxs)("div",{className:"small",children:["\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u0441\u0442\u043e\u0432: ",e.count]})]})]})})})},z=function(e){return Object(R.jsx)("div",{className:"container-fluid",children:e.categories.map((function(e){return Object(R.jsx)("div",{className:"row",style:{marginTop:"25px"},children:Object(R.jsx)(q,{id:e.id,name:e.name,avatar:e.avatar,count:e.count},e.id)})}))})},B=function(e){var t=Object(o.c)((function(e){return e.user}));return t?Object(R.jsx)("div",{className:"container",children:Object(R.jsxs)("div",{className:"jumbotron",children:[Object(R.jsx)("h1",{children:"\u0417\u0434\u0440\u0430\u0441\u0442\u0432\u0443\u0439\u0442\u0435!"}),Object(R.jsxs)("p",{className:"lead",style:{fontSize:"18pt"},children:[t.info.username,", \u0434\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 InTheGame. ",Object(R.jsx)("a",{href:"/users/"+t.info.username,children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0432\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c?"}),Object(R.jsxs)("h2",{align:"center",style:{fontSize:"20pt"},children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430: ",t.info.group_data.name]})]}),Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"container-fluid",children:Object(R.jsxs)("div",{className:"row",children:[Object(R.jsx)("a",{className:"btn btn-lg btn-primary btn-block",href:"/users/"+t.info.username,role:"button",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(R.jsx)("a",{className:"btn btn-lg btn-secondary btn-block",href:"/notifications/",children:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"}),Object(R.jsx)("a",{className:"btn btn-lg btn-success btn-block",href:"/categories/create/",role:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(R.jsx)("a",{className:"btn btn-lg btn-warning btn-block",href:"/chats/",role:"button",children:"\u0427\u0430\u0442\u044b"}),Object(R.jsx)("button",{className:"btn btn-lg btn-danger btn-block",onClick:function(e){localStorage.clear(),window.location.href="http://127.0.0.1:8000/auth/login/"},children:"\u0412\u044b\u0439\u0442\u0438"})]})})]})}):Object(R.jsx)("div",{})},H=function(){return Object(R.jsx)("div",{className:"container",children:Object(R.jsxs)("div",{className:"jumbotron",children:[Object(R.jsx)("h1",{style:{fontSize:"23pt"},children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!"}),Object(R.jsx)("hr",{}),Object(R.jsxs)("h2",{style:{fontSize:"20pt"},children:["\u0412\u044b \u043d\u0435 \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442, ",Object(R.jsx)("a",{href:"/auth/login/",children:"\u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u043e\u0439\u0442\u0438?"})]})]})})},U=function(e){var t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(o.c)((function(e){return e.user}));return Object(a.useEffect)((function(){v().then((function(e){r(e)}))}),[]),s.isAuth?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(B,{}),"\n\n",Object(R.jsx)(z,{categories:c})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(H,{}),"\n\n",Object(R.jsx)(z,{categories:c})]})},F=n(8),M=function(){return Object(R.jsx)("section",{id:"wrapper",className:"container-fluid",children:Object(R.jsx)("div",{className:"error-box",children:Object(R.jsxs)("div",{className:"error-body text-center",children:[Object(R.jsx)("h1",{className:"text-danger",style:{fontSize:"100px"},children:"404"}),Object(R.jsx)("h3",{children:"Page Not Found !"}),Object(R.jsx)("p",{className:"text-muted m-t-30 m-b-30",children:"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u043f\u0435\u0447\u0430\u0442\u0430\u043b\u0438\u0441\u044c \u0438\u043b\u0438 \u0432\u0430\u043c \u0441\u043a\u0438\u043d\u0443\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443... :)"}),Object(R.jsx)("a",{href:"/categories/",className:"btn btn-danger btn-rounded m-b-40",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})})})},P=function(){return Object(R.jsx)("div",{children:Object(R.jsx)("h2",{style:{marginLeft:"15px"},children:"429 Too many requests."})})},G=function(e){return Object(R.jsxs)("div",{className:"card border-secondary",children:[Object(R.jsx)("div",{className:"card-header bg-secondary text-white",children:Object(R.jsxs)("div",{class:"d-flex align-items-center py-1",children:[Object(R.jsx)("div",{class:"position-relative",children:Object(R.jsx)("img",{src:e.user_data.avatar.image,className:"rounded-circle float-left",alt:"avatar",width:"57",height:"57",style:{marginTop:"-10px"}})}),Object(R.jsxs)("div",{class:"flex-grow-1 pl-3",children:[Object(R.jsx)("a",{href:"/users/"+e.user_data.username,className:"text-white",style:{fontSize:"15pt"},children:e.user_data.username}),Object(R.jsx)("p",{className:"text-info",style:{fontSize:"12pt"},children:e.user_data.group_data.name})]})]})}),Object(R.jsx)("div",{className:"card-body",children:Object(R.jsxs)("a",{href:e.url,className:"text-dark",style:{textDecoration:"none"},children:[Object(R.jsx)("h4",{children:e.title}),e.text,e.photo?Object(R.jsxs)("div",{children:["\n",Object(R.jsx)("p",{style:{textAlign:"center"},children:Object(R.jsx)("img",{className:"img-fluid",src:e.photo,alt:e.photo})})]}):null]})}),Object(R.jsx)("div",{className:"card-footer",style:{display:"flex"},children:O(e.created_at)})]})},Q=function(e){return Object(R.jsx)("div",{className:"posts",children:e.posts.map((function(e){return Object(R.jsxs)("div",{class:"container",children:[Object(R.jsx)(G,{id:e.id,title:e.title,text:e.text,created_at:e.created_at,user_data:e.user_data,photo:e.photo,url:"/categories/c_id/"+e.category+"/"+e.id+"/"}),"\n\n\n"]})}))})},J=function(e){var t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(1),i=Object(A.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(!0),d=Object(A.a)(u,2),j=d[0],b=d[1],h=Object(a.useState)(null),f=Object(A.a)(h,2),m=f[0],p=f[1],O=e.match.params.categoryId;Object(a.useEffect)((function(){j&&-1!=o&&(console.log("fetching"),x.a.get("http://127.0.0.1:8000/api/v1/category/"+O+"/?page_number="+o).then((function(e){r([].concat(Object(F.a)(c),Object(F.a)(e.data))),204===e.status?l(-1):l((function(e){return e+1}))})).catch((function(e){console.log(e.response),e.response.status&&p({response:e.response.status})})).finally((function(){b(!1)})))}),[j]),Object(a.useEffect)((function(){return document.addEventListener("scroll",g),function(){document.removeEventListener("scroll",g)}}),[]);var g=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&-1!==o&&b(!0)};return m?404===m.response?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{style:{marginTop:"25px"}})]}):429===m.response?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(P,{})]}):(alert(m.response),Object(R.jsx)("div",{})):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n\n",Object(R.jsx)(Q,{posts:c,categoryId:O})]})},V=function(e){return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"card border-secondary",children:[Object(R.jsx)("div",{className:"card-header bg-secondary text-white",children:Object(R.jsxs)("div",{class:"d-flex align-items-center py-1",children:[Object(R.jsx)("div",{class:"position-relative",children:Object(R.jsx)("img",{src:e.user_data.avatar.image,alt:"avatar",style:{marginTop:"-10px"},className:"rounded-circle float-left",width:"48",height:"48"})}),Object(R.jsxs)("div",{class:"flex-grow-1 pl-3",children:[Object(R.jsx)("a",{href:"/users/"+e.user_data.username,className:"text-white",style:{fontSize:"13pt"},children:e.user_data.username}),"\n",Object(R.jsx)("p",{className:"text-info",style:{fontSize:"10pt"},children:e.user_data.group_data.name})]})]})}),Object(R.jsx)("div",{className:"card-body",children:e.text}),Object(R.jsx)("div",{className:"card-footer",children:O(e.created_at)})]})})},W=function(e){return Object(R.jsx)("div",{className:"container",children:e.comments.map((function(e){return Object(R.jsxs)("div",{children:[Object(R.jsx)(V,{id:e.id,text:e.text,created_at:e.created_at,user_data:e.user_data}),"\n"]})}))})},Y=function(e){var t=Object(a.useState)(),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(A.a)(s,2),o=i[0],l=i[1];return Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("textarea",{id:"id_text",name:"text",rows:"5",className:"form-control",spellcheck:"false",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...",onChange:function(e){return r(e.target.value)},children:c}),Object(R.jsx)("p",{className:"form-text text-muted",style:{fontSize:"10pt"},children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u0432\u0430\u0436\u0430\u0439\u0442\u0435 \u0441\u0432\u043e\u0438\u0445 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043d\u0438\u043a\u043e\u0432!"})]}),Object(R.jsx)("p",{className:"text-danger",children:o}),Object(R.jsx)("div",{className:"form-group row",children:Object(R.jsx)("div",{className:"col-sm-10",children:Object(R.jsx)("button",{onClick:function(){x.a.post("http://127.0.0.1:8000/api/v1/post/"+e.postId+"/comment/",{text:c},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){window.location.reload()})).catch((function(e){401==e.response.status?window.location.href="http://127.0.0.1:8000/auth/login/":400==e.response.status?l("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c!"):alert(e.response.status+" error")}))},className:"btn btn-primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})})]})},K=function(e){var t=e.match.params.categoryId,n=e.match.params.postId,c=Object(a.useState)(null),r=Object(A.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(A.a)(o,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){x.a.get("http://127.0.0.1:8000/api/v1/post/"+n+"/").then((function(e){i(e.data)})).catch((function(e){e.response.status&&d({response:e.response.status})}))}),[]),404==u.response?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(M,{})]}):429==u.response?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(P,{})]}):!u&&s?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsxs)("div",{class:"container",children:[Object(R.jsx)(G,{id:s.id,title:s.title,text:s.text,created_at:s.created_at,user_data:s.user_data,photo:s.photo,url:"#"}),"\n\n\n",Object(R.jsx)(Y,{postId:n,categoryId:t})]}),"\n\n\n",Object(R.jsx)("div",{className:"comments",children:Object(R.jsx)(W,{comments:s.comments})})]}):Object(R.jsx)("div",{})},X=function(e){var t=Object(a.useState)(),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(A.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(),d=Object(A.a)(u,2),j=d[0],b=d[1],h=Object(a.useState)(null),f=Object(A.a)(h,2),m=f[0],p=f[1],O=Object(a.useState)({title:null,text:null,category:null}),g=Object(A.a)(O,2),v=g[0],y=g[1],N=function(e,t,n,a){var c=function(e,t,n,a){var c=new FormData;return c.append("title",e),c.append("text",t),c.append("category",n),null!=a&&c.append("photo",a),c}(e,t,n,a);x.a.post("http://127.0.0.1:8000/api/v1/category/"+n+"/",c,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"multipart/form-data"}}).then((function(e){window.location.href="http://127.0.0.1:8000/categories/c_id/"+n+"/"})).catch((function(e){400==e.response.status&&y(e.response.data)}))};return Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("h2",{style:{margin:"0 35%",fontSize:"35px"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0441\u0442"}),"\n\n",Object(R.jsx)("label",{htmlFor:"select-category",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),"\n",Object(R.jsxs)("select",{className:"browser-default custom-select",id:"select-category",onChange:function(e){return r(e.target.value)},children:[Object(R.jsx)("option",{value:null,selected:!0,children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),e.categories.map((function(e){return Object(R.jsx)("option",{value:e.id,children:e.name})}))]}),Object(R.jsx)("p",{className:"text-danger",style:{marginTop:"-15px"},children:v.category}),Object(R.jsxs)("div",{className:"form-group",style:{marginTop:"100px"},children:[Object(R.jsx)("label",{htmlFor:"id_title",children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),"\n",Object(R.jsx)("input",{type:"text",name:"title",maxlength:"199",id:"id_title",className:"form-control",value:o,onChange:function(e){return l(e.target.value)},placeholder:"\u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043c\u0435\u0447\u0442\u0430..."}),Object(R.jsx)("p",{className:"form-text text-muted",style:{fontSize:"10pt"},children:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u043c\u044b\u0441\u043b \u043f\u043e\u0441\u0442\u0430 \u0432 \u0434\u0432\u0443\u0445 \u0441\u043b\u043e\u0432\u0430\u0445."}),v.title?Object(R.jsx)("p",{className:"text-danger",style:{marginTop:"-15px"},children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}):Object(R.jsx)("p",{})]}),"\n",Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("label",{htmlFor:"id_text",children:"\u041a\u043e\u043d\u0442\u0435\u043d\u0442"}),"\n",Object(R.jsx)("textarea",{name:"text",rows:"10",required:"",id:"id_text",className:"form-control",spellcheck:"false",onChange:function(e){return b(e.target.value)},placeholder:"\u041c\u0435\u0447\u0442\u0430 - \u043e\u0441\u043e\u0431\u044b\u0439 \u0432\u0438\u0434 \u0432\u043e\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439 \u0441\u043e\u0431\u043e\u0439 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u044b\u0445 \u043e\u0431\u0440\u0430\u0437\u043e\u0432, \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043d\u0430 \u0431\u0443\u0434\u0443\u0449\u0435\u0435 \u0438 \u0432\u044b\u0440\u0430\u0436\u0430\u044e\u0449\u0438\u0439 \u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430.",children:j}),Object(R.jsx)("p",{className:"form-text text-muted",style:{fontSize:"10pt"},children:"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0438\u0437\u043b\u0435\u0439\u0442\u0435 \u0441\u0432\u043e\u044e \u0434\u0443\u0448\u0443."}),v.text?Object(R.jsx)("p",{className:"text-danger",style:{marginTop:"-15px"},children:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}):Object(R.jsx)("p",{})]}),"\n",Object(R.jsx)("div",{className:"input-group mb-3",children:Object(R.jsxs)("div",{className:"custom-file",children:[Object(R.jsxs)("div",{className:"custom-file",children:[Object(R.jsx)("label",{htmlFor:"id_image",className:"custom-file-label",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"}),Object(R.jsx)("input",{type:"file",className:"custom-file-input",id:"id_image",accept:".png, .jpg, .jpeg",name:"image",onChange:function(e){e.preventDefault(),e.target.files[0]&&p(e.target.files[0])}})]}),Object(R.jsx)("div",{className:"input-group-append",children:Object(R.jsx)("span",{className:"input-group-text",id:"",children:"Upload"})})]})}),Object(R.jsx)("p",{className:"form-text text-muted",style:{fontSize:"10pt"},children:"\u0418 \u043d\u0430\u043a\u043e\u043d\u0435\u0446-\u0442\u043e \u043f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u044d\u0442\u043e \u043d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439!"}),"\n",Object(R.jsx)("div",{className:"form-group row",children:Object(R.jsx)("div",{className:"col-sm-10",children:Object(R.jsx)("button",{onClick:function(){c&&"\u0412\u044b\u0431\u0435\u0440\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"!==c?o&&j?N(o,j,c,m):y({title:o,text:j}):alert("\u0412\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e. \u041a\u0443\u0434\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u0441\u0442? -_-")},className:"btn btn-primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})})]})},Z=function(e){var t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(o.c)((function(e){return e.user}));return Object(a.useEffect)((function(){v().then((function(e){r(e)}))}),[]),s.isAuth?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(X,{categories:c})]}):s.isAuth?Object(R.jsx)("div",{}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",Object(R.jsx)(M,{})]})},$="GET_FRIEND_REQUEST",ee="GET_FRIEND_REQUESTS",te="SEND_FRIEND_REQUEST",ne="ACCEPT_FRIEND_REQUEST",ae="DELETE_FRIEND_REQUEST",ce="REMOVE_FRIEND_REQUEST_FROM_LIST",re="GET_ALL_FRIENDS",se="DELETE_USER_FROM_FRIEND_LIST",ie=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={friendRequest:null,error:null},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/user/find/"+t+"/friend_request/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n.friendRequest=e.data})).catch((function(e){n.error=e.response.status}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={notifications:null,error:null},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/user/find/"+t+"/request-notifications/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n.notifications=e.data})).catch((function(e){n.error=e.response.status}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={friendRequest:null,error:null},e.next=3,x.a.post("http://127.0.0.1:8000/api/v1/user/find/"+t+"/friend_request/",{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n.friendRequest=e.data})).catch((function(e){n.error=e.response.status}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.delete("http://127.0.0.1:8000/api/v1/user/find/"+t+"/friend_request/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n=e.status})).catch((function(e){n=e.response.status}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={friendRequest:null,error:null},e.next=3,x.a.patch("http://127.0.0.1:8000/api/v1/user/find/"+t+"/friend_request/?is_accepted="+n,{},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a.friendRequest=e.data})).catch((function(e){a.error=e.response.status}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(e){return function(t){ie(e).then((function(e){t({type:$,payload:{detail:e.friendRequest}})}))}},be=function(e){return function(t){ue(e).then((function(e){t({type:ae,payload:{statusCode:e}})}))}},he=function(e,t){return function(n){de(e,t).then((function(e){n({type:ne,payload:{detail:e.friendRequest}})}))}},fe=function(e,t){return function(n){var a=e.filter((function(e){return e.from_user.id!==t}));n({type:ce,payload:{list:a}})}},me=function(e){return function(t){x.a.get("http://127.0.0.1:8000/api/v1/user/find/"+e+"/friends/").then((function(e){t({type:re,payload:{list:e.data,statusCode:e.status}})})).catch((function(e){t({type:re,payload:{list:[],statusCode:e.response.status}})}))}},pe=function(e){return function(t){ue(e).then((function(e){t({type:se,payload:{statusCode:e}})}))}},xe=function(e){return Object(R.jsx)("div",{children:Object(R.jsx)("nav",{children:Object(R.jsxs)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[Object(R.jsx)("a",{className:"nav-item nav-link active",id:"nav-home-tab","data-toggle":"tab",href:"#friends",role:"tab","aria-controls":"nav-home","aria-selected":"true",children:"\u0414\u0440\u0443\u0437\u044c\u044f"}),Object(R.jsx)("a",{className:"nav-item nav-link",id:"nav-profile-tab","data-toggle":"tab",href:"#chats",role:"tab","aria-controls":"nav-profile","aria-selected":"false",children:"\u0427\u0430\u0442\u044b"})]})})})},Oe=function(e){var t=e.notification.from_user,n=Object(o.b)(),a=Object(o.c)((function(e){return e.friendRequest})),c=function(){n(he(t.id,1)),n(fe(a.list,t.id))},r=function(){n(be(t.id)),n(fe(a.list,t.id))};return Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsxs)("div",{className:"list-group-item list-group-item-action border-0",children:[Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:t.avatar.image,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",children:[Object(R.jsx)("a",{href:"/users/"+t.username+"/",children:Object(R.jsx)("p",{style:{fontSize:"14pt"},children:t.username})}),Object(R.jsxs)("div",{className:"small",style:{marginTop:"-15px"},children:[Object(R.jsx)("p",{className:"text-info",children:t.group_data.name}),Object(R.jsx)("u",{children:"\u041f\u043e\u0447\u0442\u0430: "})," "+t.email]})]}),Object(R.jsxs)("div",{className:"d-none d-lg-block",style:{marginLeft:"auto"},children:[Object(R.jsx)("button",{className:"btn btn-primary",onClick:c,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-warning",style:{marginLeft:"10px"},onClick:r,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]}),Object(R.jsxs)("div",{className:"d-none d-sm-block d-lg-none",style:{marginLeft:"auto"},children:[Object(R.jsx)("button",{className:"btn btn-primary",style:{width:"100%"},onClick:c,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-warning",style:{width:"100%"},onClick:r,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(R.jsx)("div",{className:"d-none d-block d-sm-none",style:{marginTop:"10px"},children:Object(R.jsxs)("div",{style:{textAlign:"center"},children:[Object(R.jsx)("button",{className:"btn btn-primary",style:{width:"75%"},onClick:c,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-warning",style:{width:"75%"},onClick:r,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})})]})})},ge=function(e){var t=Object(o.c)((function(e){return e.friendRequest}));return Object(R.jsx)("div",{children:t.list.map((function(e){return Object(R.jsx)(Oe,{notification:e})}))})},ve=function(e){var t=Object(o.c)((function(e){return e.friendRequest}));return t&&t.list&&t.list.length>0?Object(R.jsx)("div",{className:"tab-pane fade show active",id:"friends",role:"tabpanel","aria-labelledby":"nav-home-tab",children:Object(R.jsx)(ge,{})}):Object(R.jsx)("div",{className:"tab-pane fade show active",id:"friends",role:"tabpanel","aria-labelledby":"nav-home-tab",children:"There are not notifications for you. :( you are alone."})},ye=function(e){var t=Object(o.b)(),n=function(){var n;t((n=e.notification.from_chat.id,function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:a=e.sent,t({type:f,payload:{acceptedRequest:a}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},a=function(){var n,a,c;t((n=e.notification.from_chat.id,a=e.notification.to_user.id,c=e.notification.id,function(e){k(n,a).then((function(t){L(n,a).then((function(t){e({type:m,payload:{deletedRequestId:c}})}))}))}))};return Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsxs)("a",{href:"#",className:"list-group-item list-group-item-action border-0",children:[Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.notification.from_chat.avatar,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",children:[Object(R.jsx)("p",{style:{fontSize:"14pt"},children:e.notification.from_chat.name}),Object(R.jsxs)("div",{className:"small",style:{marginTop:"-15px"},children:[Object(R.jsx)("p",{className:"text-info",children:"pass"}),"pass"]})]}),Object(R.jsxs)("div",{className:"d-none d-lg-block",style:{marginLeft:"auto"},children:[Object(R.jsx)("button",{className:"btn btn-primary",onClick:function(){return n()},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-danger",style:{marginLeft:"10px"},onClick:function(){return a()},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]}),Object(R.jsxs)("div",{className:"d-none d-sm-block d-lg-none",style:{marginLeft:"auto"},children:[Object(R.jsx)("button",{className:"btn btn-primary",style:{width:"100%"},onClick:function(){return n()},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-danger",style:{width:"100%"},onClick:function(){return a()},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),Object(R.jsx)("div",{className:"d-none d-block d-sm-none",style:{marginTop:"10px"},children:Object(R.jsxs)("div",{style:{textAlign:"center"},children:[Object(R.jsx)("button",{className:"btn btn-primary",style:{width:"75%"},onClick:function(){return n()},children:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c"}),Object(R.jsx)("button",{className:"btn btn-danger",style:{width:"75%"},onClick:function(){return a()},children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})})]})})},Ne=function(e){var t=Object(o.c)((function(e){return e.user}));return Object(R.jsx)("div",{children:t.chatRequestNotifications.map((function(e){return Object(R.jsx)(ye,{notification:e})}))})},we=function(e){var t=Object(o.c)((function(e){return e.user}));return t.chatRequestNotifications&&t.chatRequestNotifications.length>0?Object(R.jsx)("div",{className:"tab-pane fade",id:"chats",role:"tabpanel","aria-labelledby":"nav-home-tab",children:Object(R.jsx)(Ne,{})}):Object(R.jsx)("div",{className:"tab-pane fade",id:"chats",role:"tabpanel","aria-labelledby":"nav-home-tab",children:"There are not notifications for you :(("})},_e=function(){return Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("div",{children:Object(R.jsx)(xe,{})}),Object(R.jsx)("div",{className:"card",style:{marginTop:"5px"},children:Object(R.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[Object(R.jsx)(ve,{}),Object(R.jsx)(we,{})]})})]})},Se=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.user}));return Object(a.useEffect)((function(){var e;n.info&&t((e=n.info.id,function(t){oe(e).then((function(e){t({type:ee,payload:{list:e.notifications}})}))}))}),[n.info]),Object(a.useEffect)((function(){var e,a;(null===n||void 0===n||null===(e=n.info)||void 0===e?void 0:e.id)&&t((a=n.info.id,function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(a);case 2:n=e.sent,t({type:h,payload:{chatRequestNotifications:n.chatRequestsList}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[null===n||void 0===n?void 0:n.info,null===n||void 0===n?void 0:n.chatRequestNotifications.length]),n.isAuth&&n.info?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(_e,{})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]})},ke=(n(20),n(25),function(e){var t=Object(a.useState)(),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(A.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(""),d=Object(A.a)(u,2),j=d[0],b=d[1];return Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col-10 mx-auto",children:Object(R.jsx)("div",{className:"registration-form",children:Object(R.jsxs)("div",{className:"form-login",children:[Object(R.jsx)("div",{className:"form-icon",children:Object(R.jsx)("span",{children:Object(R.jsx)("i",{className:"icon icon-user"})})}),Object(R.jsx)("div",{className:"form-group",children:Object(R.jsx)("input",{type:"text",className:"form-control item",id:"username",value:c,onChange:function(e){return r(e.target.value)},placeholder:"Username"})}),Object(R.jsx)("div",{className:"form-group",children:Object(R.jsx)("input",{type:"password",className:"form-control item",id:"password1",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Password"})}),Object(R.jsx)("a",{href:"#",style:{float:"right",marginTop:"-10px",backgroundColor:"PowderBlue"},children:"Don't have an account?"}),"\n",Object(R.jsx)("p",{className:"text-danger",style:{float:"right",backgroundColor:"PowderBlue"},children:j}),"\n\n",Object(R.jsx)("div",{className:"form-group",children:Object(R.jsx)("button",{type:"button",className:"btn btn-block create-account",onClick:function(e){x.a.post("http://127.0.0.1:8000/jwt/token/",{username:c,password:o}).then((function(e){localStorage.setItem("jwt",e.data.access),window.location.href="http://127.0.0.1:8000/categories/"})).catch((function(e){401==e.response.status?b("\u0412\u044b \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u043b\u0438 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."):400==e.response.status?b("\u041b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c\u0438 -_-."):b("".concat(e.response.status," error"))}))},children:"Sign In"})})]})})})})}),Ee=function(){var e=Object(o.c)((function(e){return e.user}));return Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),"\n",e.isAuth?Object(R.jsx)(M,{}):Object(R.jsx)(ke,{})]})},Le=function(){var e=Object(a.useState)(),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(A.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(),u=Object(A.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(),h=Object(A.a)(b,2),f=h[0],m=h[1],p=Object(a.useState)({username:null,password:null,password2:null,email:null}),O=Object(A.a)(p,2),g=O[0],v=O[1];return Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col-10 mx-auto",children:Object(R.jsx)("div",{className:"registration-form",children:Object(R.jsxs)("div",{className:"form",children:[Object(R.jsx)("div",{className:"form-icon",children:Object(R.jsx)("span",{children:Object(R.jsx)("i",{className:"icon icon-user"})})}),Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("input",{type:"text",className:"form-control item",id:"username",value:n,onChange:function(e){return c(e.target.value)},placeholder:"Username"}),Object(R.jsx)("p",{className:"text-danger",style:{float:"left",marginTop:"-10px",backgroundColor:"PowderBlue"},children:g.username})]}),Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("input",{type:"password",className:"form-control item",id:"password1",value:i,onChange:function(e){return o(e.target.value)},placeholder:"Password"}),Object(R.jsx)("p",{className:"text-danger",style:{float:"left",marginTop:"-10px",backgroundColor:"PowderBlue"},children:g.password})]}),Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("input",{type:"password",className:"form-control item",id:"password2",value:d,onChange:function(e){return j(e.target.value)},placeholder:"Repeat Password"}),Object(R.jsx)("p",{className:"text-danger",style:{float:"left",marginTop:"-10px",backgroundColor:"PowderBlue"},children:g.password2})]}),Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("input",{type:"text",className:"form-control item",id:"email",value:f,onChange:function(e){return m(e.target.value)},placeholder:"Email"}),Object(R.jsx)("p",{className:"text-danger",style:{float:"left",marginTop:"-10px",backgroundColor:"PowderBlue"},children:g.email})]}),"\n",Object(R.jsx)("a",{href:"#",style:{float:"right",marginTop:"-5px",backgroundColor:"PowderBlue"},children:"Already have an account?"}),"\n\n",Object(R.jsx)("div",{className:"form-group",children:Object(R.jsx)("button",{onClick:function(){i!=d&&v({password2:"\u041f\u0430\u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c!"}),x.a.post("http://127.0.0.1:8000/api/v1/user/register/",{username:n,password:i,email:f}).then((function(e){window.location.href="http://127.0.0.1:8000/auth/login/"})).catch((function(e){400===e.response.status?v(e.response.data):alert(e.response.status+" error")}))},className:"btn btn-block create-account",children:"Create Account"})})]})})})})},Te=function(){var e=Object(o.c)((function(e){return e.user}));return Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),e.isAuth?Object(R.jsx)(M,{}):Object(R.jsx)(Le,{})]})},Ce=function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c!"}),Object(R.jsxs)("p",{children:["\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c! ",Object(R.jsx)("a",{href:"#",children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0432\u043e\u0439\u0442\u0438"})]})]})},Ie=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return a=!1,console.log("You cant go here, because you're register!"),e.abrupt("return",a);case 4:return e.next=6,x.a.patch("http://127.0.0.1:8000/api/v1/user/accept/"+t+"/",{},{}).then((function(e){a=!0})).catch((function(e){a=!1,404===e.response.status?alert("Token doesnt exists"):alert(e.response.status+" error")}));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ae=function(e){var t=Object(a.useState)(!1),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(o.c)((function(e){return e.user})),i=e.match.params.token;return Object(a.useEffect)((function(){Ie(i,s.isAuth).then((function(e){r(e)}))}),[]),Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),c?Object(R.jsx)(Ce,{}):Object(R.jsx)(M,{})]})},Re=function(e){var t=Object(a.useState)(e.chat.last_message),n=Object(A.a)(t,2),c=(n[0],n[1],Object(o.c)((function(e){return e.user})));return console.log(),Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsx)("a",{href:e.type_is_group?"/chats/group/"+e.chat.id+"/":"/chats/personal/"+e.chat.interlocutor.username+"/",className:"list-group-item list-group-item-action border-0",children:Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.type_is_group?e.chat.avatar:e.chat.interlocutor.avatar.image,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",id:e.chat.id,children:[Object(R.jsx)("p",{style:{fontSize:"14pt"},children:e.type_is_group?e.chat.name:e.chat.interlocutor.username}),Object(R.jsx)("div",{className:"small",style:{marginTop:"-10px"},children:Object(R.jsx)("p",{children:e.chat.last_message.text?Object(R.jsxs)("div",{children:[Object(R.jsx)("b",{children:c.info.id===e.chat.last_message.user_data.id?"\u0412\u044b":e.chat.last_message.user_data.username}),"\n",e.chat.last_message.text.substr(0,20)+"...","\n",O(e.chat.last_message.created_at)]}):Object(R.jsx)("div",{children:"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"})})})]})]})})})},De=function(e){return console.log(e.chats),Object(R.jsx)("div",{children:e.chats.map((function(t){return Object(R.jsx)(Re,{chat:t,type_is_group:e.type_is_group},t.id)}))})},qe=function(){var e=Object(a.useState)(),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(A.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)({name:null,avatar:null}),u=Object(A.a)(l,2),b=u[0],h=u[1];Object(a.useEffect)((function(){var e=document.getElementById("name-error"),t=document.getElementById("avatar-error");e.innerHTML="",t.innerHTML="",b.name&&(e.innerHTML=b.name),b.avatar&&(t.innerHTML=b.avatar)}),[b]);var f=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,n&&t.append("name",n),t.append("avatar",i),e.next=5,C(t);case 5:if(null===(a=e.sent)||void 0===a?void 0:a.id){e.next=9;break}return h(a),e.abrupt("return");case 9:window.location.href="http://127.0.0.1:8000/chats/";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsx)("div",{className:"modal fade bd-example-modal-lg",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true",children:Object(R.jsx)("div",{className:"modal-dialog modal-lg",children:Object(R.jsx)("div",{className:"modal-content",children:Object(R.jsxs)("div",{style:{width:"80%",margin:"10px auto"},children:[Object(R.jsxs)("div",{className:"form-group",children:[Object(R.jsx)("label",{htmlFor:"name",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0447\u0430\u0442\u0430"}),Object(R.jsx)("input",{type:"text",className:"form-control",id:"name",onChange:function(e){return c(e.target.value)},"aria-describedby":"emailHelp",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0447\u0430\u0442\u0430"}),Object(R.jsx)("p",{className:"text-danger",id:"name-error"})]}),Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)("label",{htmlFor:"avatar",className:"form-label",children:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u0447\u0430\u0442\u0430"}),Object(R.jsx)("input",{className:"form-control",type:"file",id:"avatar",onChange:function(e){e.preventDefault(),e.target.files[0]&&o(e.target.files[0])}}),Object(R.jsx)("p",{className:"text-danger",id:"avatar-error"})]}),Object(R.jsx)("button",{type:"button",onClick:f,className:"btn btn-primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})})})},ze=function(e){return Object(R.jsx)("div",{className:"container",children:Object(R.jsxs)("div",{className:"card",children:[Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col-11 col-md-10 col-lg-9 col-xl-9 mx-auto",style:{display:"flex"},children:[Object(R.jsx)("input",{type:"text",className:"form-control my-3 ml-2",placeholder:"Search..."}),Object(R.jsx)("button",{className:"btn btn-primary my-3 ml-2",children:"\u041d\u0430\u0439\u0442\u0438"})]})}),Object(R.jsx)("hr",{}),"\n",Object(R.jsx)("b",{style:{margin:"0 auto",fontSize:"15pt"},children:"\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u044b\u0435 \u0447\u0430\u0442\u044b"}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col-12",children:[Object(R.jsx)("button",{type:"button",className:"btn btn-primary my-3","data-toggle":"modal","data-target":".bd-example-modal-lg",style:{marginLeft:"12.5%"},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0447\u0430\u0442"}),Object(R.jsx)(qe,{}),"\n",Object(R.jsx)(De,{chats:e.groupChats,type_is_group:!0}),Object(R.jsx)("a",{href:"/chats/group/",style:{marginLeft:"12.5%"},children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"})]})}),"\n",Object(R.jsx)("hr",{style:{borderTop:"1px gray solid"}}),"\n",Object(R.jsx)("b",{style:{margin:"0 auto",fontSize:"15pt"},children:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b"}),Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col-12",children:[Object(R.jsx)(De,{chats:e.personalChats,type_is_group:!1}),Object(R.jsx)("a",{href:"/chats/personal/",style:{marginLeft:"12.5%"},children:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"})]})})]})})},Be=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/personal_chats/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),401!=e.t0.response.status&&alert(e.t0.response.status+" error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={info:null,error:null},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/personal_chats/"+t+"/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n.info=e.data})).catch((function(e){n.error=e.response.status}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={messages:null,error:null},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/personal_chats/"+t+"/messages/?page_number="+n,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){204!==e.status?a.messages=e.data:a.error=!0})).catch((function(e){a.error=!0}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={personal:[],group:[]},e.next=3,w("last_message",0);case 3:return n=e.sent,t.group=n.data,console.log(t.group),e.next=8,Be();case 8:return t.personal=e.sent,e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(o.c)((function(e){return e.user})),t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(A.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(0),j=Object(A.a)(d,2),b=j[0],h=j[1];return Object(a.useEffect)((function(){setInterval((function(){h((function(e){return e+1}))}),5e3)}),[]),Object(a.useEffect)((function(){Fe().then((function(e){r(e.group),u(e.personal)}))}),[b]),e.isAuth?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(ze,{groupChats:c,personalChats:l}),"\n"]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]})},Pe=(n(39),function(e){var t;return(null===e||void 0===e||null===(t=e.message)||void 0===t?void 0:t.user_data)?Object(R.jsx)("div",{children:e.currentUserData.info.id===e.message.user_data.id?Object(R.jsxs)("div",{className:"chat-message-right pb-4",style:{width:"70%"},children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{src:e.message.user_data.avatar.image,className:"rounded-circle mr-1",alt:"you",width:"40",height:"40"})}),Object(R.jsxs)("div",{className:"flex-shrink-1 bg-light rounded py-2 px-3 mr-3",children:[Object(R.jsx)("div",{className:"font-weight-bold mb-1",children:Object(R.jsx)("a",{href:"#",style:{textDecoration:"none",color:"black"},children:"\u0412\u044b"})}),e.message.text,Object(R.jsx)("div",{className:"text-muted small text-nowrap mt-2",children:O(e.message.created_at)})]})]}):Object(R.jsxs)("div",{className:"chat-message-left pb-4",style:{width:"70%"},children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{src:e.message.user_data.avatar.image,className:"rounded-circle mr-1",alt:"...",width:"40",height:"40"})}),Object(R.jsxs)("div",{className:"flex-shrink-1 bg-light rounded py-2 px-3 ml-3",children:[Object(R.jsx)("div",{className:"font-weight-bold mb-1",children:Object(R.jsx)("a",{href:"/users/"+e.message.user_data.username+"/",style:{textDecoration:"none",color:"black"},children:e.message.user_data.username})}),e.message.text,Object(R.jsx)("div",{className:"text-muted small text-nowrap mt-2",children:O(e.message.created_at)})]})]})}):Object(R.jsx)("div",{})}),Ge=function(e){return Object(R.jsx)("div",{children:e.messages.map((function(t){return Object(R.jsx)(Pe,{message:t,currentUserData:e.currentUserData,new:e.new})}))})},Qe=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={info:null,error:null},c="http://127.0.0.1:8000/api/v1/chats/"+n+"/messages/",e.next=4,x.a.post(c,{text:t},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a.info=e.data})).catch((function(e){a.error=e.response.status}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Je=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={info:null,error:null},c="http://127.0.0.1:8000/api/v1/personal_chats/"+n+"/messages/",e.next=4,x.a.post(c,{text:t},{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){a.info=e.data})).catch((function(e){a.error=e.response.status}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ve=function(e){var t=Object(a.useState)(""),n=Object(A.a)(t,2),c=n[0],r=n[1],s=function(){""!==c&&(e.type_is_group?Qe(c,e.chat.id).then((function(t){e.ws.send(JSON.stringify({type:"send_message",data:t.info}))})).catch((function(e){console.error(e)})):Je(c,e.chat.interlocutor.username).then((function(t){e.ws.send(JSON.stringify({type:"send_message",data:t.info}))})).catch((function(e){console.error(e)}))),r("")};return Object(R.jsx)("div",{className:"flex-grow-0 py-3 px-4 border-top",children:Object(R.jsxs)("div",{className:"input-group",children:[Object(R.jsx)("input",{type:"text",className:"form-control",id:"chat-message-input",value:c,onChange:function(e){return r(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&s()},placeholder:"Type your message"}),Object(R.jsx)("button",{className:"btn btn-primary",id:"chat-message-submit",onClick:s,children:"Send"})]})})},We=function(e){return Object(R.jsx)("div",{className:"py-2 px-4 border-bottom  d-lg-block",children:Object(R.jsxs)("a",{href:e.type_is_group?"/chats/group/".concat(e.id,"/settings/"):"/users/".concat(e.name,"/"),className:"d-flex align-items-center py-1 text-dark",style:{textDecoration:"none"},children:[Object(R.jsx)("div",{className:"position-relative",children:Object(R.jsx)("img",{src:e.avatar,className:"rounded-circle mr-1",alt:"...",width:"50",height:"50"})}),Object(R.jsx)("div",{className:"flex-grow-1 pl-3",children:Object(R.jsx)("strong",{children:e.name})}),e.type_is_group?Object(R.jsx)("a",{href:"/chats/"+e.id+"/settings/",style:{marginLeft:"auto"},children:Object(R.jsx)("svg",{enableBackground:"new 0 0 91 91",height:"35px",id:"Layer_1",version:"1.1",viewBox:"0 0 91 91",width:"35px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:Object(R.jsx)("g",{children:Object(R.jsx)("path",{d:"M90.668,35.091c0.17-0.643,0.08-1.326-0.25-1.902L78.813,13.115c-0.695-1.195-2.225-1.607-3.422-0.914   l-9.734,5.619c-1.791-1.283-3.707-2.391-5.727-3.307V3.269c0-1.383-1.121-2.504-2.506-2.504H34.23   c-1.385,0-2.504,1.121-2.504,2.504v11.246c-1.891,0.861-3.699,1.893-5.406,3.086l-9.678-5.736   c-0.572-0.338-1.252-0.434-1.896-0.271c-0.643,0.166-1.197,0.578-1.535,1.15L1.387,32.69c-0.338,0.57-0.436,1.254-0.271,1.898   c0.166,0.643,0.578,1.195,1.15,1.533l9.682,5.734c-0.154,1.305-0.229,2.523-0.229,3.695c0,1.039,0.061,2.117,0.189,3.309   L2.16,54.491c-0.576,0.334-0.996,0.881-1.166,1.521c-0.174,0.641-0.082,1.326,0.25,1.9l11.6,20.076   c0.691,1.197,2.225,1.609,3.422,0.914l9.736-5.621c1.793,1.285,3.711,2.391,5.725,3.307v11.244c0,1.385,1.119,2.504,2.504,2.504   h23.193c1.385,0,2.506-1.119,2.506-2.504V76.589c1.889-0.859,3.697-1.895,5.402-3.088l9.684,5.736   c1.188,0.705,2.727,0.311,3.432-0.879L90.27,58.413c0.336-0.572,0.434-1.256,0.271-1.898c-0.166-0.643-0.578-1.195-1.152-1.533   l-9.676-5.734c0.156-1.314,0.23-2.518,0.23-3.695c0-1.051-0.063-2.143-0.189-3.313l9.746-5.627   C90.074,36.282,90.496,35.733,90.668,35.091z M59.242,45.55c0,7.396-6.018,13.414-13.416,13.414   c-7.396,0-13.412-6.018-13.412-13.414c0-7.393,6.016-13.41,13.412-13.41C53.225,32.14,59.242,38.157,59.242,45.55z"})})})}):Object(R.jsx)("div",{})]})})},Ye=function(e){return Object(R.jsx)("div",{children:e.users.map((function(e){return Object(R.jsx)("a",{href:"/users/"+e.username+"/",className:"list-group-item list-group-item-action border-0",children:Object(R.jsxs)("div",{className:"d-flex align-items-start",children:[Object(R.jsx)("img",{src:e.user_data.avatar.image,className:"rounded-circle mr-1",alt:"...",width:"40",height:"40"}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",children:[e.user_data.username,Object(R.jsxs)("div",{className:"small",children:[Object(R.jsx)("span",{className:"fas fa-circle chat-offline"}),e.name]})]})]})})}))})},Ke=function(e){return Object(R.jsxs)("div",{className:"col-12 col-lg-5 col-xl-3 d-none d-lg-block border-right",children:[Object(R.jsx)("div",{className:"px-4 d-none d-md-block",children:Object(R.jsx)("div",{className:"d-flex align-items-center",children:Object(R.jsx)("div",{className:"flex-grow-1",children:Object(R.jsx)("input",{type:"text",className:"form-control my-3",placeholder:"Search..."})})})}),Object(R.jsx)(Ye,{users:e.users})]})},Xe=function(e){var t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1],s=Object(a.useRef)();return Object(a.useEffect)((function(){e.type_is_group&&_(e.chat.id).then((function(e){r(e)}))}),[]),Object(a.useEffect)((function(){s.current&&s.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})})),void 0!==e.chat?Object(R.jsx)("main",{className:"content",children:Object(R.jsx)("div",{className:"container p-0",children:Object(R.jsx)("div",{className:"card",children:Object(R.jsxs)("div",{className:"row g-0",children:[e.type_is_group?Object(R.jsx)(Ke,{users:c}):"",Object(R.jsx)("hr",{className:"d-block d-lg-none mt-1 mb-0"}),Object(R.jsxs)("div",{className:e.type_is_group?"col-12 col-lg-7 col-xl-9":"col-12 col-lg-12 col-xl-12",children:[e.type_is_group?Object(R.jsx)(We,{avatar:e.chat.avatar,name:e.chat.name,id:e.chat.id,type_is_group:!0}):Object(R.jsx)(We,{avatar:e.chat.interlocutor.avatar.image,name:e.chat.interlocutor.username,id:e.chat.interlocutor.id,type_is_group:!1}),Object(R.jsx)("div",{className:"position-relative",children:Object(R.jsxs)("div",{className:"chat-messages p-4",id:"chat-window",onScroll:e.scrollHandler,ref:s,style:{height:"550px"},children:[Object(R.jsx)(Ge,{messages:e.messages,currentUserData:e.currentUserData,new:!1}),"\n",Object(R.jsxs)("center",{children:[Object(R.jsx)("p",{children:"New messages"}),Object(R.jsx)("hr",{style:{borderColor:"red"}})]}),Object(R.jsx)(Ge,{messages:e.newMessages,currentUserData:e.currentUserData,new:!0})]})}),Object(R.jsx)(Ve,{chat:e.chat,ws:e.ws,currentUserData:e.currentUserData,type_is_group:e.type_is_group})]})]})})})}):Object(R.jsx)("div",{})},Ze=function(e){var t=e.match.params.username,n=Object(a.useState)({info:null,isAuth:!1}),c=Object(A.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(A.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(),j=Object(A.a)(d,2),b=j[0],h=j[1],f=Object(a.useState)(!1),m=Object(A.a)(f,2),p=m[0],x=m[1],O=Object(a.useState)([]),v=Object(A.a)(O,2),y=v[0],N=v[1],w=Object(a.useState)(2),_=Object(A.a)(w,2),S=_[0],k=_[1],E=Object(a.useState)(!1),L=Object(A.a)(E,2),T=L[0],C=L[1],I=Object(a.useState)([1355]),q=Object(A.a)(I,2),z=q[0],B=q[1],H=Object(a.useRef)();Object(a.useEffect)((function(){He(t).then((function(e){h(e.info),x(e.error)}))}),[]),Object(a.useEffect)((function(){g().then((function(e){s(e)})),Ue(t,1).then((function(e){u(e.messages.reverse());var t=document.getElementById("chat-window");t.scrollTop=t.scrollHeight}))}),[]),Object(a.useEffect)((function(){H.current=new WebSocket("ws://127.0.0.1:8000/ws/personal_chat/".concat(t,"/?token=").concat(localStorage.getItem("jwt"),"/")),H.current.onopen=function(){console.log("opened")},H.current.onclose=function(){console.log("closed")},H.current.onmessage=function(e){!function(e){var t=document.getElementById("chat-window");N((function(t){return[].concat(Object(F.a)(t),[e])})),t.scrollHeight-t.scrollTop<1e3&&(t.scrollTop=t.scrollHeight)}(JSON.parse(e.data))}}),[]),Object(a.useEffect)((function(){T&&-1!==S&&(console.log("fetching"),Ue(t,S).then((function(e){e.error?k(-1):(u([].concat(Object(F.a)(e.messages.reverse()),Object(F.a)(l))),k((function(e){return e+1})))})).catch((function(e){console.log(e)})).finally((function(){C(!1)})))}),[T]),Object(a.useEffect)((function(){if(l&&l.length>0){var e=document.getElementById("chat-window");B([].concat(Object(F.a)(z),[e.scrollHeight]))}}),[l]);return!r.isAuth||p?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(Xe,{type_is_group:!1,messages:l,newMessages:y,chat:b,ws:H.current,currentUserData:r,scrollHandler:function(e){if(e.target.scrollTop<10&&-1!==S){C(!0);var t=document.getElementById("chat-window");console.log("Scroll top is ".concat(t.scrollTop)),console.log(z),t.scrollTop=e.target.scrollHeight-z[z.length-2]}}})]})},$e=function(e){return Object(R.jsx)("div",{children:Object(R.jsx)("nav",{children:Object(R.jsx)("div",{className:"nav nav-tabs",id:"nav-tab",role:"tablist",children:[{name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",id:"nav-home-tab",className:"nav-item nav-link active",href:"#main-tab",aria_controls:"nav-home",aria_selected:!0},{name:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",id:"nav-members-tab",className:"nav-item nav-link",href:"#members-tab",aria_controls:"#nav-members",aria_selected:!1},{name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0430",id:"nav-profile-tab",className:"nav-item nav-link",href:"#friend-tab",aria_controls:"#nav-profile",aria_selected:!1}].map((function(e){return Object(R.jsx)("a",{className:e.className,id:e.id,"data-toggle":"tab",href:e.href,role:"tab","aria-controls":e.aria_controls,"aria-selected":e.aria_selected,children:e.name})}))})})})},et=function(e){return Object(R.jsx)("div",{className:"tab-pane fade show active",id:"main-tab",role:"tabpanel","aria-labelledby":"nav-home-tab",children:"here will be inforamtion tab."})},tt="GET_ALL_CHAT_REQUESTS",nt="GET_ALL_CHAT_MEMBERS",at="CREATE_REQUEST",ct="DELETE_REQUEST",rt="GET_GROUP_CHAT_LIST",st="ADD_NEW_GROUP_CHATS_IN_GROUP_CHAT_LIST",it=function(e){var t=Object(o.c)((function(e){return e.requestList})),n=Object(o.b)(),a=function(){var t,a;n((t=e.chatData.data.id,a=e.friendData.id,function(e){E(t,a).then((function(t){e({type:at,payload:{newRequest:t}})}))}))},c=function(){var t,a;n((t=e.chatData.data.id,a=e.friendData.id,function(e){k(t,a).then((function(n){L(t,a).then((function(t){e({type:ct,payload:{deletingRequestId:n.id}})}))}))}))};return t.requestList.find((function(t){return t.to_user.id===e.friendData.id&&!t.is_accepted}))?Object(R.jsx)("div",{children:Object(R.jsx)("button",{className:"btn btn-warning",onClick:function(){return c()},children:"\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c"})}):t.requestList.find((function(t){return t.to_user.id===e.friendData.id&&t.is_accepted}))?Object(R.jsx)("div",{children:Object(R.jsx)("button",{className:"btn btn-danger",onClick:function(){return c()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}):Object(R.jsx)("div",{children:Object(R.jsx)("button",{className:"btn btn-info",onClick:function(){return a()},children:"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c"})})},ot=function(e){var t=Object(a.useState)(!1),n=Object(A.a)(t,2);n[0],n[1],Object(o.b)();return Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsx)("div",{className:"list-group-item list-group-item-action border-0",children:Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.friendData.avatar.image,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("a",{href:"/users/"+e.friendData.username+"/",className:"flex-grow-1 ml-3 text-dark",style:{textDecoration:"none"},children:[Object(R.jsx)("p",{style:{fontSize:"14pt"},children:e.friendData.username}),Object(R.jsxs)("div",{className:"small",style:{marginTop:"-15px"},children:[Object(R.jsx)("p",{className:"text-info",children:e.friendData.group_data.name}),Object(R.jsx)("u",{children:"\u041f\u043e\u0447\u0442\u0430: "})," "+e.friendData.email]})]}),Object(R.jsx)("div",{style:{marginLeft:"auto"},children:Object(R.jsx)(it,{friendData:e.friendData,chatData:e.chatData})})]})})})},lt=function(e){var t=Object(o.c)((function(e){return e.friendList}));Object(o.c)((function(e){return e.requestList}));return Object(R.jsx)("div",{className:"container",style:{padding:"10px"},children:t.list.map((function(t){return Object(R.jsx)(ot,{friendData:t,chatData:e.chatData})}))})},ut=function(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.user})),c=Object(o.c)((function(e){return e.friendList}));return Object(a.useEffect)((function(){n.isAuth&&t(me(n.info.id))}),[t,n]),c.list.length>0&&n.isAuth?Object(R.jsx)("div",{className:"tab-pane fade",id:"friend-tab",role:"tabpanel","aria-labelledby":"nav-home-tab",children:Object(R.jsx)(lt,{chatData:e.chatData})}):Object(R.jsx)("div",{className:"tab-pane fade",id:"friend-tab",role:"tabpanel","aria-labelledby":"nav-home-tab",children:"You don't have friends."})},dt=function(e){return Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsx)("div",{className:"list-group-item list-group-item-action border-0",children:Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.member.user_data.avatar.image,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("a",{href:"/users/"+e.member.user_data.username+"/",className:"flex-grow-1 ml-3 text-dark",style:{textDecoration:"none"},children:[Object(R.jsx)("p",{style:{fontSize:"14pt"},children:e.member.user_data.username}),Object(R.jsx)("div",{className:"small",style:{marginTop:"-15px"},children:Object(R.jsx)("p",{className:"text-info",children:e.member.name})})]}),Object(R.jsx)("div",{style:{marginLeft:"auto"},children:Object(R.jsx)("button",{className:"btn btn-warning",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]})})})},jt=function(){var e=Object(o.c)((function(e){return e.requestList.members}));return Object(R.jsx)("div",{className:"container",children:e.map((function(e){return Object(R.jsx)(dt,{member:e})}))})},bt=function(e){Object(o.b)();var t=Object(o.c)((function(e){return e.user})),n=Object(o.c)((function(e){return e.requestList.members}));return Object(a.useEffect)((function(){console.log(n)}),[]),n.length>0&&t.isAuth?Object(R.jsx)("div",{className:"tab-pane fade",id:"members-tab",role:"tabpanel","aria-labelledby":"nav-members-tab",children:Object(R.jsx)(jt,{})}):Object(R.jsx)("div",{className:"tab-pane fade",id:"members-tab",role:"tabpanel","aria-labelledby":"nav-members-tab",children:"\u0412 \u0432\u0430\u0448\u0435\u043c \u0447\u0430\u0442\u0435 \u043d\u0435\u0442 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432. \u041c\u0431 \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u043c \u0445\u043e\u0442\u044c \u043a\u0430\u0432\u043e \u043d\u0438\u043f\u0443\u0442\u044c?(("})},ht=function(e){var t=Object(o.c)((function(e){return e.user}));return e.chatData&&t.info?Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("div",{children:Object(R.jsx)($e,{})}),Object(R.jsx)("div",{className:"card",style:{marginTop:"5px"},children:Object(R.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[Object(R.jsx)(et,{chatData:e.chatData}),Object(R.jsx)(bt,{chatData:e.chatData}),Object(R.jsx)(ut,{chatData:e.chatData})]})})]}):Object(R.jsx)("div",{children:"Loading"})},ft=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={chat:null,error:!1},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/chats/"+t+"/",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){n.chat=e.data})).catch((function(e){n.error=e.response.status}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(e){var t=e.match.params.chatId,n=Object(o.b)(),c=Object(o.c)((function(e){return e.user})),r=(Object(o.c)((function(e){return e.requestList})),Object(a.useState)({data:null,error:null})),s=Object(A.a)(r,2),i=s[0],l=s[1];return Object(a.useEffect)((function(){ft(t).then((function(e){l({data:e.chat,error:e.error})}))}),[]),Object(a.useEffect)((function(){n(function(e){return function(t){_(e).then((function(e){t({type:nt,payload:{members:e}})}))}}(t)),n(function(e){return function(t){S(e).then((function(e){t({type:tt,payload:{requestList:e}})}))}}(t))}),[n]),c.isAuth&&403!==i.error?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(ht,{chatData:i})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]})},pt=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={messages:null,error:null},e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/chats/".concat(t,"/messages/?page_number=").concat(n),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){204!==e.status?a.messages=e.data:a.error=!0})).catch((function(e){a.error=!0}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xt=function(e){var t=e.match.params.chatId,n=Object(a.useState)(),c=Object(A.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(A.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)([]),j=Object(A.a)(d,2),b=j[0],h=j[1],f=Object(a.useState)(null),m=Object(A.a)(f,2),p=m[0],x=m[1],O=Object(a.useState)([1355]),v=Object(A.a)(O,2),y=v[0],N=v[1],w=Object(a.useState)(!1),_=Object(A.a)(w,2),S=_[0],k=_[1],E=Object(a.useState)(2),L=Object(A.a)(E,2),T=L[0],C=L[1],I=Object(a.useState)(!1),q=Object(A.a)(I,2),z=q[0],B=q[1],H=Object(a.useRef)();Object(a.useEffect)((function(){ft(t).then((function(e){x(e.chat),k(e.error)}))}),[]),Object(a.useEffect)((function(){g().then((function(e){s(e)})),pt(t,1).then((function(e){u(e.messages.reverse());var t=document.getElementById("chat-window");t.scrollTop=t.scrollHeight}))}),[]),Object(a.useEffect)((function(){H.current=new WebSocket("ws://127.0.0.1:8000/ws/group_chat/"+t+"/?token="+localStorage.getItem("jwt")+"/"),H.current.onopen=function(){console.log("opened")},H.current.onclose=function(){console.log("closed")},H.current.onmessage=function(e){!function(e){var t=document.getElementById("chat-window");h((function(t){return[].concat(Object(F.a)(t),[e])})),t.scrollHeight-t.scrollTop<1e3&&(t.scrollTop=t.scrollHeight)}(JSON.parse(e.data))}}),[]),Object(a.useEffect)((function(){z&&-1!==T&&(console.log("fetching"),pt(t,T).then((function(e){e.error?C(-1):(u([].concat(Object(F.a)(e.messages.reverse()),Object(F.a)(l))),C((function(e){return e+1})))})).catch((function(e){console.log(e)})).finally((function(){B(!1)})))}),[z]),Object(a.useEffect)((function(){if(l&&l.length>0){var e=document.getElementById("chat-window");N([].concat(Object(F.a)(y),[e.scrollHeight]))}}),[l]);return 404===S||403===S?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]}):(l||b)&&r?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(Xe,{type_is_group:!0,messages:l,newMessages:b,chat:p,ws:H.current,currentUserData:r,scrollHandler:function(e){if(e.target.scrollTop<10&&-1!==T){B(!0);var t=document.getElementById("chat-window");console.log("Scroll top is ".concat(t.scrollTop)),console.log(y),t.scrollTop=e.target.scrollHeight-y[y.length-2]}}})]}):(console.log(l),console.log(b),console.log(r),Object(R.jsx)("div",{children:"\u043b\u043e\u0445"}))},Ot=function(){return Object(R.jsx)("nav",{children:Object(R.jsxs)("ul",{class:"nav nav-tabs",children:[Object(R.jsx)("li",{class:"nav-item",children:Object(R.jsx)("a",{href:"#home","aria-controls":"home",role:"tab",class:"nav-link active","data-toggle":"tab","aria-selected":"true",children:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(R.jsx)("li",{class:"nav-item",children:Object(R.jsx)("a",{href:"#settings","aria-controls":"settings",role:"tab",class:"nav-link","data-toggle":"tab","aria-selected":"false",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})]})})},gt=(n(76),function(e){var t=Object(o.c)((function(e){return e.friendRequest})),n=Object(o.c)((function(e){return e.user})),a=Object(o.b)(),c=function(t){a(be(e.user.id)),a(je(e.user.id)),a(I())};return n.isAuth?e.user.id===n.info.id?Object(R.jsx)("div",{children:Object(R.jsx)("a",{href:"/redac/",className:"btn btn-outline-secondary btn-block default-button",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}):t.detail&&!1===t.detail.is_accepted?Object(R.jsxs)("div",{children:[Object(R.jsx)("a",{href:"/chats/personal/".concat(e.user.username,"/"),className:"btn btn-info default-button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),"\n",t.detail.to_user.id===e.user.id?Object(R.jsx)("button",{type:"button",className:"btn btn-warning default-button",onClick:c,style:{width:"100%"},children:"\u041e\u0442\u043e\u0437\u0432\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441."}):Object(R.jsx)("button",{type:"button",className:"btn btn-success default-button",onClick:function(t){a(he(e.user.id,1)),a(je(e.user.id)),a(I())},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f."})]}):-1===n.info.friends.indexOf(e.user.id)?Object(R.jsxs)("div",{children:[Object(R.jsx)("a",{href:"/chats/personal/".concat(e.user.username,"/"),className:"btn btn-info default-button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),"\n",Object(R.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-block default-button",onClick:function(){return a((t=e.user.id,function(e){le(t).then((function(t){e({type:te,payload:{detail:t.friendRequest}})}))}));var t},style:{width:"100%"},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f."})]}):-1!==n.info.friends.indexOf(e.user.id)?Object(R.jsxs)("div",{children:[Object(R.jsx)("a",{href:"/chats/personal/".concat(e.user.username,"/"),className:"btn btn-info default-button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),Object(R.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-block default-button",onClick:c,style:{width:"100%"},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439."})]}):Object(R.jsx)("div",{children:"\u041a\u0430\u043a\u0430\u044f \u0442\u043e \u0434\u0438\u0447\u044c"}):Object(R.jsx)("div",{children:Object(R.jsx)("a",{href:"/auth/login/",className:"btn btn-outline-primary btn-block default-button",children:"\u0425\u043e\u0442\u0438\u0442\u0435 \u0432\u043e\u0439\u0442\u0438?"})})}),vt=function(e){var t=[{name:"\u0414\u0440\u0443\u0437\u044c\u044f",value:e.friends.length,width:"120px",marginLeft:"0px",href:"/users/"+e.user.username+"/friends/"},{name:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0439",value:e.posts.length,width:"120px",marginLeft:"20px",href:"#"},{name:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:e.commentList.length,width:"130px",marginLeft:"20px",href:"#"}];return Object(R.jsxs)("div",{className:"col-12 col-sm-11 col-md-8 col-lg-8",children:[Object(R.jsx)("p",{style:{fontSize:"20pt"},children:e.user.username}),Object(R.jsx)("p",{className:"text-info",style:{marginTop:"-15px"},children:e.user.group_data.name}),Object(R.jsx)("hr",{style:{borderColor:"red"}}),Object(R.jsx)("div",{id:"user_second_data",children:Object(R.jsxs)("p",{children:[Object(R.jsx)("u",{children:"\u041f\u043e\u0447\u0442\u0430"}),": ",e.user.email]})}),Object(R.jsx)("div",{className:"d-flex flex-row",style:{height:"40%",position:"relative",marginLeft:"1px",textAlign:"center"},children:t.map((function(e){return Object(R.jsxs)("a",{href:e.href,className:"text-dark",style:{textDecoration:"none"},children:[Object(R.jsxs)("div",{className:"p-2 card d-none d-lg-block",style:{height:"80%",width:e.width,marginLeft:e.marginLeft},children:[Object(R.jsx)("b",{children:e.name}),Object(R.jsx)("p",{style:{fontSize:"35pt"},children:e.value})]}),Object(R.jsxs)("div",{className:"p-2 card d-lg-none",style:{height:"auto",width:"auto",marginLeft:e.marginLeft},children:[Object(R.jsx)("b",{children:e.name}),Object(R.jsx)("p",{style:{fontSize:"35pt"},children:e.value})]})]})}))})]})},yt=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,x.a.get("http://127.0.0.1:8000/api/v1/user/comments/"+t+"/").then((function(e){n=e.data})).catch((function(e){console.error(e)}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(e){var t=e.user.friends,n=Object(a.useState)([]),c=Object(A.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){yt(e.user.id).then((function(e){s(e)}))}),[]),Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{className:"col-12 col-sm-11 col-md-3 col-lg-3",children:[Object(R.jsx)("img",{src:e.user.avatar.image,alt:"avatar",className:"rounded w-100"}),"\n\n",Object(R.jsx)(gt,{user:e.user}),"\n\n"]}),Object(R.jsx)(vt,{user:e.user,friends:t,posts:e.posts,commentList:r})]})},wt=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://127.0.0.1:8000/api/v1/user/posts/"+t+"/").then((function(e){204==e.status&&(n=null),n=e.data})).catch((function(e){alert(e.response.status+" error")}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=function(e){var t=Object(a.useState)([]),n=Object(A.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){wt(e.user.id).then((function(e){r(e)}))}),[]),Object(R.jsxs)("div",{className:"tab-pane fade show active",id:"home",children:[Object(R.jsx)(Nt,{user:e.user,posts:c}),"\n\n",c?Object(R.jsx)(Q,{posts:c,categoryId:"#"}):"\u041d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432"]})},St=function(){return Object(R.jsx)("div",{className:"tab-pane",id:"settings",children:Object(R.jsxs)("div",{className:"row",children:[Object(R.jsx)("div",{className:"col-8",children:"\u0422\u0443\u0442 \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(R.jsx)("div",{className:"col-3"})]})})},kt=function(e){var t=e.match.params.username,n=Object(o.b)(),c=Object(a.useState)(),r=Object(A.a)(c,2),s=r[0],i=r[1],l=Object(o.c)((function(e){return e.user}));return Object(a.useEffect)((function(){s&&n(je(s.id))}),[n,s]),Object(a.useEffect)((function(){y(t).then((function(e){i(e)}))}),[]),s&&void 0!==l?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)(Ot,{}),Object(R.jsxs)("div",{className:"tab-content",children:["\n",Object(R.jsx)(_t,{user:s}),Object(R.jsx)(St,{})]})]})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]})},Et=function(e){var t,n,a=Object(o.c)((function(e){return e.user})),c=Object(o.c)((function(e){return e.friendList})),r=Object(o.b)();return Object(R.jsx)("div",{className:"card col-9 my-3 mx-auto border border-primary",children:Object(R.jsxs)("div",{className:"list-group-item list-group-item-action border-0",children:[Object(R.jsxs)("div",{className:"d-flex align-items-start",style:{marginLeft:"-10px"},children:[Object(R.jsx)("img",{src:e.friend.avatar.image,className:"rounded-circle mr-1",alt:"lol",width:"60",height:"60",style:{marginLeft:"-10px"}}),Object(R.jsxs)("div",{className:"flex-grow-1 ml-3",children:[Object(R.jsx)("a",{href:"/users/"+e.friend.username+"/",children:Object(R.jsx)("p",{style:{fontSize:"14pt"},children:e.friend.username})}),Object(R.jsxs)("div",{className:"small",style:{marginTop:"-15px"},children:[Object(R.jsx)("p",{className:"text-info",children:e.friend.group_data.name}),Object(R.jsx)("u",{children:"\u041f\u043e\u0447\u0442\u0430: "})," "+e.friend.email]})]}),(null===a||void 0===a||null===(t=a.info)||void 0===t?void 0:t.id)===e.user.id?Object(R.jsx)("div",{style:{marginLeft:"auto"},className:"d-none d-lg-block",onClick:function(){var t,n;r(pe(e.friend.id)),r((t=c.list,n=e.friend.id,function(e){var a=t.filter((function(e){return e.id!==n}));e({type:se,payload:{list:a}})}))},children:Object(R.jsx)("button",{className:"btn btn-danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}):null]}),(null===a||void 0===a||null===(n=a.info)||void 0===n?void 0:n.id)===e.user.id?Object(R.jsx)("div",{className:"d-lg-none",children:Object(R.jsx)("button",{className:"btn btn-danger",style:{marginTop:"10px",width:"100%"},onClick:function(){return pe(e.friend.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}):null]})})},Lt=function(e){var t=Object(o.c)((function(e){return e.friendList}));return t&&t.list.length>0?Object(R.jsx)("div",{children:t.list.map((function(t){return Object(R.jsx)(Et,{friend:t,user:e.user},t.id)}))}):Object(R.jsx)("div",{style:{textAlign:"center"},children:Object(R.jsx)("b",{children:"This user doesnt have friends."})})},Tt=function(e){var t=e.match.params.username,n=Object(o.b)(),c=Object(o.c)((function(e){return e.friendList})),r=Object(a.useState)(),s=Object(A.a)(r,2),i=s[0],l=s[1];return Object(a.useEffect)((function(){i&&n(me(i.id))}),[n,i]),Object(a.useEffect)((function(){y(t).then((function(e){l(e)}))}),[t]),c.status>=400&&c.status<600?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)("div",{className:"container",children:Object(R.jsx)(Lt,{user:i})})]})},Ct=function(){return Object(R.jsxs)("div",{className:"alert alert-primary",role:"alert",children:["\u0421\u043f\u0438\u0441\u043e\u043a \u0447\u0430\u0442\u043e\u0432 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u043f\u043e \u0438\u0445 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e. \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438.","\n",Object(R.jsx)("a",{href:"/chats/",className:"alert-link",children:" \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043e\u0431\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0447\u0430\u0442\u043e\u0432"}),"."]})},It=function(){return Object(R.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:[Object(R.jsx)("button",{type:"button",className:"btn btn-outline-primary",children:"\u041f\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e"}),Object(R.jsx)("button",{type:"button",className:"btn btn-outline-primary",children:"\u0411\u0435\u0437 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}),Object(R.jsx)("button",{type:"button",className:"btn btn-outline-primary",children:"\u041f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e"})]})},At=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chatList.groupChats})),n=Object(o.c)((function(e){return e.user})),c=Object(a.useState)(1),r=Object(A.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(!0),u=Object(A.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(null),h=Object(A.a)(b,2),f=h[0],m=h[1];Object(a.useEffect)((function(){d&&-1!==s&&(console.log("fetching"),w("-name",s).then((function(t){var n;e((n=t.data,function(e){e({type:st,payload:{newLoadedChatList:n}})})),204===t.status?i(-1):i((function(e){return e+1}))})).catch((function(e){console.log(e.response),e.response.status&&m({response:e.response.status})})).finally((function(){j(!1)})))}),[d]),Object(a.useEffect)((function(){return document.addEventListener("scroll",p),function(){document.removeEventListener("scroll",p)}}),[]);var p=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&-1!==s&&j(!0)};return n.isAuth&&!f?Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)(Ct,{}),"\n",Object(R.jsx)(It,{}),"\n",Object(R.jsx)("div",{className:"card",children:Object(R.jsxs)("div",{className:"row",children:["\n",Object(R.jsx)("div",{className:"col-12",children:t&&t.length>0?Object(R.jsx)(De,{chats:t,type_is_group:!0}):Object(R.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0447\u0430\u0442\u043e\u0432... \u041c\u0431 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c?"})})]})})]})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(D,{}),Object(R.jsx)(M,{})]})},Rt=function(){return Object(R.jsx)("div",{})},Dt=Object(i.e)((function(e){e.history;var t=Object(o.b)();return Object(a.useEffect)((function(){t(I())}),[t]),Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(i.d,{children:[Object(R.jsx)(i.b,{exact:!0,path:"/categories/",component:U}),Object(R.jsx)(i.b,{exact:!0,path:"/categories/create/",component:Z}),Object(R.jsx)(i.b,{exact:!0,path:"/categories/c_id/:categoryId/",component:J}),Object(R.jsx)(i.b,{exact:!0,path:"/categories/c_id/:categoryId/:postId/",component:K}),Object(R.jsx)(i.b,{exact:!0,path:"/notifications/",component:Se}),Object(R.jsx)(i.b,{exact:!0,path:"/auth/login/",component:Ee}),Object(R.jsx)(i.b,{exact:!0,path:"/auth/sign_up/",component:Te}),Object(R.jsx)(i.b,{exact:!0,path:"/auth/accept/:token/",component:Ae}),Object(R.jsx)(i.b,{exact:!0,path:"/users/:username",component:kt}),Object(R.jsx)(i.b,{exact:!0,path:"/users/:username/friends/",component:Tt}),Object(R.jsx)(i.b,{exact:!0,path:"/chats/",component:Me}),Object(R.jsx)(i.b,{exact:!0,path:"/chats/group/",component:At}),Object(R.jsx)(i.b,{exact:!0,path:"chats/personal/",component:Rt}),Object(R.jsx)(i.b,{exact:!0,path:"/chats/group/:chatId/",component:xt}),Object(R.jsx)(i.b,{exact:!0,path:"/chats/group/:chatId/settings/",component:mt}),Object(R.jsx)(i.b,{exact:!0,path:"/chats/personal/:username/",component:Ze}),Object(R.jsx)(i.a,{from:"/",to:"/categories"})]})})})),qt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},zt=n(23),Bt=n(41),Ht=n(6),Ut={info:null,isAuth:!1,chatRequestNotifications:[]},Ft={list:[],detail:null,statusCode:null},Mt={list:[],statusCode:null},Pt={requestList:[],newRequest:null,deletingRequestId:null,requestListState:[],userChatRequestList:[],members:[]},Gt={groupChats:[]},Qt=Object(zt.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case h:return Object(Ht.a)(Object(Ht.a)({},e),t.payload);case f:var n=e.chatRequestNotifications.filter((function(e){return e.id!==t.payload.acceptedRequest.id}));return Object(Ht.a)(Object(Ht.a)(Object(Ht.a)({},e),t.payload),{},{chatRequestNotifications:n});case m:var a=e.chatRequestNotifications.filter((function(e){return e.id!==t.payload.deletedRequestId}));return Object(Ht.a)(Object(Ht.a)(Object(Ht.a)({},e),t.payload),{},{chatRequestNotifications:a});default:return e}},friendRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:case ee:case ce:case te:case ne:case ae:return Object(Ht.a)(Object(Ht.a)({},e),t.payload);default:return e}},friendList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:case se:return Object(Ht.a)(Object(Ht.a)({},e),t.payload);default:return e}},requestList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:case nt:return Object(Ht.a)(Object(Ht.a)({},e),t.payload);case at:return Object(Ht.a)(Object(Ht.a)(Object(Ht.a)({},e),t.payload),{},{requestList:[].concat(Object(F.a)(e.requestList),[t.payload.newRequest])});case ct:var n=e.requestList.filter((function(e){return e.id!==t.payload.deletingRequestId}));return Object(Ht.a)(Object(Ht.a)(Object(Ht.a)({},e),t.payload),{},{requestList:n});default:return e}},chatList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return Object(Ht.a)(Object(Ht.a)({},e),t.payload);case st:return Object(Ht.a)(Object(Ht.a)({},e),{},{groupChats:[].concat(Object(F.a)(e.groupChats),Object(F.a)(t.payload.newLoadedChatList))});default:return e}}}),Jt=Object(zt.c)(Qt,Object(zt.a)(Bt.a)),Vt=Object(l.a)();s.a.render(Object(R.jsx)(i.c,{history:Vt,children:Object(R.jsx)(o.a,{store:Jt,children:Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(Dt,{})})})}),document.getElementById("root")),qt()}},[[80,1,2]]]);
//# sourceMappingURL=main.8edddb1d.chunk.js.map